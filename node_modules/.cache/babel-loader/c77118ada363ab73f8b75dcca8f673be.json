{"ast":null,"code":"import _asyncToGenerator from\"/Users/javier/Documents/BudgetApp/budgetapp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/javier/Documents/BudgetApp/budgetapp/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useContext}from\"react\";import{Card,ProgressBar}from\"react-bootstrap\";import AuthContext from\"../../Context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MoneyCard=function MoneyCard(_ref){var amount=_ref.amount,title=_ref.title,saved=_ref.saved,id=_ref.id;var completed=saved*100/amount;var _useContext=useContext(AuthContext),authTokens=_useContext.authTokens,logoutUser=_useContext.logoutUser;var deleteGoals=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/goals/\".concat(id,\"/delete/\"),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;if(!(response.status===200)){_context.next=11;break;}_context.next=9;return createTransactionForGoal();case 9:_context.next=12;break;case 11:if(response.statusText===\"Unauthorized\"){logoutUser();}case 12:window.location.reload();case 13:case\"end\":return _context.stop();}}},_callee);}));return function deleteGoals(){return _ref2.apply(this,arguments);};}();var createTransactionForGoal=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var newDate,offset,date,response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newDate=new Date();offset=newDate.getTimezoneOffset();date=new Date(newDate.getTime()-offset*120*1000);date=date.toISOString().split(\"T\")[0];_context2.next=6;return fetch(\"/api/transactions/create/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)},body:JSON.stringify({amount:saved,category:\"goal\",receiver:title,transaction_way:\"I\",date:date})});case 6:response=_context2.sent;_context2.next=9;return response.json();case 9:data=_context2.sent;if(response.status===200){//history(\"/\");\n//For now i use this because of time but its not a good solution to\n//update the react view when create new object\n}else if(response.statusText===\"Unauthorized\"){logoutUser();}case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function createTransactionForGoal(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Card,{className:\"rounded-5 my-2\",children:/*#__PURE__*/_jsx(Card.Body,{className:\"mx-2 bg-red\",children:saved?/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-11 col-sm-11 col-ld-11\",children:/*#__PURE__*/_jsx(Card.Text,{className:\"text-capitalize\",children:title})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-11 col-sm-11 col-ld-11\",onClick:function onClick(){return deleteGoals();},children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",className:\"bi bi-trash2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M14 3a.702.702 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.703.703 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2zM3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5c-1.954 0-3.69-.311-4.785-.793z\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-success\",children:[\"$\",saved]}),/*#__PURE__*/_jsxs(\"span\",{children:[\" / $ \",amount]})]}),/*#__PURE__*/_jsx(ProgressBar,{variant:\"success\",now:completed})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card.Text,{className:\"text-capitalize\",children:title}),/*#__PURE__*/_jsx(\"div\",{children:amount>0?/*#__PURE__*/_jsxs(\"h4\",{children:[\"$\",amount]}):/*#__PURE__*/_jsxs(\"h4\",{className:\"text-danger\",children:[\"$\",amount]})})]})})})});};export default MoneyCard;","map":{"version":3,"sources":["/Users/javier/Documents/BudgetApp/budgetapp/frontend/src/Components/Cards/MoneyCard.js"],"names":["React","useEffect","useContext","Card","ProgressBar","AuthContext","MoneyCard","amount","title","saved","id","completed","authTokens","logoutUser","deleteGoals","fetch","method","headers","Authorization","String","access","response","json","data","status","createTransactionForGoal","statusText","window","location","reload","newDate","Date","offset","getTimezoneOffset","date","getTime","toISOString","split","body","JSON","stringify","category","receiver","transaction_way"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext } from \"react\";\nimport { Card, ProgressBar } from \"react-bootstrap\";\nimport AuthContext from \"../../Context/AuthContext\";\n\nconst MoneyCard = ({ amount, title, saved, id }) => {\n  const completed = (saved * 100) / amount;\n  let { authTokens, logoutUser } = useContext(AuthContext);\n\n  let deleteGoals = async () => {\n    let response = await fetch(`/api/goals/${id}/delete/`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access),\n      },\n    });\n    let data = await response.json();\n    if (response.status === 200) {\n      //history(\"/\");\n      await createTransactionForGoal();\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n    window.location.reload();\n  };\n\n  const createTransactionForGoal = async () => {\n    let newDate = new Date();\n    const offset = newDate.getTimezoneOffset();\n    let date = new Date(newDate.getTime() - offset * 120 * 1000);\n    date = date.toISOString().split(\"T\")[0];\n    let response = await fetch(\"/api/transactions/create/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access),\n      },\n      body: JSON.stringify({\n        amount: saved,\n        category: \"goal\",\n        receiver: title,\n        transaction_way: \"I\",\n        date: date,\n      }),\n    });\n    let data = await response.json();\n    if (response.status === 200) {\n      //history(\"/\");\n      //For now i use this because of time but its not a good solution to\n      //update the react view when create new object\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  return (\n    <div>\n      <Card className=\"rounded-5 my-2\">\n        <Card.Body className=\"mx-2 bg-red\">\n          {saved ? (\n            <div className=\"\">\n              <div className=\"d-flex mb-2\">\n                <div className=\"col-md-11 col-sm-11 col-ld-11\">\n                  <Card.Text className=\"text-capitalize\">{title}</Card.Text>\n                </div>\n                <div\n                  className=\"col-md-11 col-sm-11 col-ld-11\"\n                  onClick={() => deleteGoals()}\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    fill=\"currentColor\"\n                    className=\"bi bi-trash2\"\n                  >\n                    <path d=\"M14 3a.702.702 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.703.703 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2zM3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5c-1.954 0-3.69-.311-4.785-.793z\" />\n                  </svg>\n                </div>\n              </div>\n              <div>\n                <h4>\n                  <span className=\"text-success\">${saved}</span>\n                  <span> / $ {amount}</span>\n                </h4>\n                <ProgressBar variant=\"success\" now={completed} />\n              </div>\n            </div>\n          ) : (\n            <div>\n              <Card.Text className=\"text-capitalize\">{title}</Card.Text>\n              <div>\n                {amount > 0 ? (\n                  <h4>${amount}</h4>\n                ) : (\n                  <h4 className=\"text-danger\">${amount}</h4>\n                )}\n              </div>\n            </div>\n          )}\n        </Card.Body>\n      </Card>\n    </div>\n  );\n};\n\nexport default MoneyCard;\n"]},"metadata":{},"sourceType":"module"}