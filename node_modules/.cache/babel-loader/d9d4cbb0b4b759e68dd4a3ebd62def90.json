{"ast":null,"code":"var _jsxFileName = \"/Users/javier/Documents/BudgetFrontend/frontend/src/Components/Cards/MoneyCard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext } from \"react\";\nimport { Card, ProgressBar } from \"react-bootstrap\";\nimport AuthContext from \"../../Context/AuthContext\"; //import AddTransacGoal from \"../Forms/AddTransacGoal\";\n\nimport AddEditGoalModal from \"../Modals/AddEditGoalModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MoneyCard = _ref => {\n  _s();\n\n  let {\n    amount,\n    title,\n    saved,\n    id,\n    red\n  } = _ref;\n  const completed = saved * 100 / amount;\n  let {\n    authTokens,\n    logoutUser\n  } = useContext(AuthContext);\n\n  let deleteGoal = async () => {\n    let response = await fetch(`/goals/${id}/delete/`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access)\n      }\n    });\n\n    if (response.status === 200) {\n      //history(\"/\");\n      await createTransactionForGoal();\n      window.location.reload();\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  const createTransactionForGoal = async () => {\n    if (saved == 0) {\n      return;\n    }\n\n    let newDate = new Date();\n    const offset = newDate.getTimezoneOffset();\n    let date = new Date(newDate.getTime() - offset * 120 * 1000);\n    date = date.toISOString().split(\"T\")[0];\n    let response = await fetch(\"transactions/create/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access)\n      },\n      body: JSON.stringify({\n        amount: saved,\n        category: \"goal\",\n        receiver: title,\n        transaction_way: \"I\",\n        date: date\n      })\n    });\n\n    if (response.status === 200) {//history(\"/\");\n      //For now i use this because of time but its not a good solution to\n      //update the react view when create new object\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"rounded-5 my-2\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        className: \"mx-1\",\n        children: saved ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-100 mx-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex mb-2 w-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-10 col-sm-10 col-lg-10 col-10\",\n              children: /*#__PURE__*/_jsxDEV(Card.Title, {\n                className: \"text-capitalize\",\n                children: title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-2 col-sm-2 col-lg-2 col-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    style: {\n                      cursor: \"pointer\"\n                    },\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    width: \"16\",\n                    height: \"16\",\n                    fill: \"currentColor\",\n                    className: \"bi bi-trash2 mr-2 my-0\",\n                    onClick: () => deleteGoal(),\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M14 3a.702.702 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.703.703 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2zM3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5c-1.954 0-3.69-.311-4.785-.793z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 81,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 72,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(AddEditGoalModal, {\n                    id: id,\n                    title: title,\n                    amount: amount,\n                    saved: saved\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 85,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-success\",\n                children: [\"$\", saved]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\" / $ \", amount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n              variant: \"success\",\n              now: completed\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Card.Text, {\n            className: \"text-capitalize\",\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: !red ? /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-success\",\n              children: [\"$\", amount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-danger\",\n              children: [\"$\", amount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MoneyCard, \"9b9iikmWR7B5P+BF1xYwrP9MwW0=\");\n\n_c = MoneyCard;\nexport default MoneyCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"MoneyCard\");","map":{"version":3,"names":["React","useContext","Card","ProgressBar","AuthContext","AddEditGoalModal","MoneyCard","amount","title","saved","id","red","completed","authTokens","logoutUser","deleteGoal","response","fetch","method","headers","Authorization","String","access","status","createTransactionForGoal","window","location","reload","statusText","newDate","Date","offset","getTimezoneOffset","date","getTime","toISOString","split","body","JSON","stringify","category","receiver","transaction_way","cursor"],"sources":["/Users/javier/Documents/BudgetFrontend/frontend/src/Components/Cards/MoneyCard.js"],"sourcesContent":["import React, { useContext } from \"react\";\nimport { Card, ProgressBar } from \"react-bootstrap\";\nimport AuthContext from \"../../Context/AuthContext\";\n//import AddTransacGoal from \"../Forms/AddTransacGoal\";\nimport AddEditGoalModal from \"../Modals/AddEditGoalModal\";\n\nconst MoneyCard = ({ amount, title, saved, id, red }) => {\n  const completed = (saved * 100) / amount;\n  let { authTokens, logoutUser } = useContext(AuthContext);\n\n  let deleteGoal = async () => {\n    let response = await fetch(`/goals/${id}/delete/`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access),\n      },\n    });\n    if (response.status === 200) {\n      //history(\"/\");\n      await createTransactionForGoal();\n      window.location.reload();\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  const createTransactionForGoal = async () => {\n    if (saved == 0) {\n      return;\n    }\n    let newDate = new Date();\n    const offset = newDate.getTimezoneOffset();\n    let date = new Date(newDate.getTime() - offset * 120 * 1000);\n    date = date.toISOString().split(\"T\")[0];\n    let response = await fetch(\"transactions/create/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access),\n      },\n      body: JSON.stringify({\n        amount: saved,\n        category: \"goal\",\n        receiver: title,\n        transaction_way: \"I\",\n        date: date,\n      }),\n    });\n    if (response.status === 200) {\n      //history(\"/\");\n      //For now i use this because of time but its not a good solution to\n      //update the react view when create new object\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  return (\n    <div>\n      <Card className=\"rounded-5 my-2\">\n        <Card.Body className=\"mx-1\">\n          {saved ? (\n            <div className=\"w-100 mx-0\">\n              <div className=\"d-flex mb-2 w-100\">\n                <div className=\"col-md-10 col-sm-10 col-lg-10 col-10\">\n                  <Card.Title className=\"text-capitalize\">{title}</Card.Title>\n                </div>\n                <div className=\"col-md-2 col-sm-2 col-lg-2 col-2\">\n                  <div className=\"row\">\n                    <div className=\"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\">\n                      <svg\n                        style={{ cursor: \"pointer\" }}\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"16\"\n                        height=\"16\"\n                        fill=\"currentColor\"\n                        className=\"bi bi-trash2 mr-2 my-0\"\n                        onClick={() => deleteGoal()}\n                      >\n                        <path d=\"M14 3a.702.702 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.703.703 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2zM3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5c-1.954 0-3.69-.311-4.785-.793z\" />\n                      </svg>\n                    </div>\n                    <div className=\"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\">\n                      <AddEditGoalModal\n                        id={id}\n                        title={title}\n                        amount={amount}\n                        saved={saved}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div>\n                <h4>\n                  <span className=\"text-success\">${saved}</span>\n                  <span> / $ {amount}</span>\n                </h4>\n                <ProgressBar variant=\"success\" now={completed} />\n              </div>\n            </div>\n          ) : (\n            <div>\n              <Card.Text className=\"text-capitalize\">{title}</Card.Text>\n              <div>\n                {!red ? (\n                  <h4 className=\"text-success\">${amount}</h4>\n                ) : (\n                  <h4 className=\"text-danger\">${amount}</h4>\n                )}\n              </div>\n            </div>\n          )}\n        </Card.Body>\n      </Card>\n    </div>\n  );\n};\n\nexport default MoneyCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}