{"ast":null,"code":"import _asyncToGenerator from\"/Users/javier/Documents/BudgetApp/budgetapp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/javier/Documents/BudgetApp/budgetapp/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/javier/Documents/BudgetApp/budgetapp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/javier/Documents/BudgetApp/budgetapp/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useContext}from\"react\";import{Form,Button,Modal,InputGroup,FormControl,OverlayTrigger,Tooltip}from\"react-bootstrap\";import AuthContext from\"../../Context/AuthContext\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddTransacGoal=function AddTransacGoal(_ref){var goal=_ref.goal;var _useState=useState(goal),_useState2=_slicedToArray(_useState,2),isGoal=_useState2[0],setIsGoal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var _useContext=useContext(AuthContext),authTokens=_useContext.authTokens,logoutUser=_useContext.logoutUser;var history=useNavigate();var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var renderTooltip=function renderTooltip(props){return/*#__PURE__*/_jsx(Tooltip,_objectSpread(_objectSpread({id:\"button-tooltip\"},props),{},{children:\"Add Transaction\"}));};var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),validated=_useState6[0],setValidated=_useState6[1];var createTransaction=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/transactions/create/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)},body:JSON.stringify({amount:event.target.elements.formAmount.value,category:event.target.elements.formCategory.value,date:event.target.elements.formDate.value,receiver:event.target.elements.formReceiver.value,transaction_way:event.target.elements.formWay.value})});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;if(response.status===200){//history(\"/\");\nwindow.location.reload();}else if(response.statusText===\"Unauthorized\"){logoutUser();}case 7:case\"end\":return _context.stop();}}},_callee);}));return function createTransaction(_x){return _ref2.apply(this,arguments);};}();var createTransactionForGoal=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(event);_context2.next=3;return fetch(\"/api/transactions/create/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)},body:JSON.stringify({amount:event.target.elements.formSaved.value,category:\"goal\",receiver:event.target.elements.formReceiver.value,transaction_way:\"O\",date:event.target.elements.formDate.value})});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:data=_context2.sent;if(response.status===200){//history(\"/\");\n//For now i use this because of time but its not a good solution to\n//update the react view when create new object\nwindow.location.reload();}else if(response.statusText===\"Unauthorized\"){logoutUser();}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function createTransactionForGoal(_x2){return _ref3.apply(this,arguments);};}();var createGoal=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"/api/goals/create/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)},body:JSON.stringify({amount:event.target.elements.formAmount.value,saved:event.target.elements.formSaved.value,title:event.target.elements.formReceiver.value})});case 2:response=_context3.sent;_context3.next=5;return response.json();case 5:data=_context3.sent;if(!(response.status===200)){_context3.next=12;break;}//history(\"/\");\nconsole.log(\"hola\");_context3.next=10;return createTransactionForGoal(event);case 10:_context3.next=13;break;case 12:if(response.statusText===\"Unauthorized\"){logoutUser();}case 13:case\"end\":return _context3.stop();}}},_callee3);}));return function createGoal(_x3){return _ref4.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(event){var form;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:form=event.currentTarget;if(form.checkValidity()===false){event.preventDefault();event.stopPropagation();}else{if(isGoal){createGoal(event);}else{createTransaction(event);}}setValidated(true);handleClose();case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function handleSubmit(_x4){return _ref5.apply(this,arguments);};}();var handleCloseForm=function handleCloseForm(event){event.preventDefault();event.stopPropagation();setValidated(false);handleClose();};return/*#__PURE__*/_jsxs(\"div\",{className:\"px-0 d-flex justify-content-center mx-0\",children:[/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[isGoal?/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,onClick:function onClick(){return setValidated(false);},children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Add new goal\"})}):/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,onClick:function onClick(){return setValidated(false);},children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Add new transaction\"})}),/*#__PURE__*/_jsxs(Form,{noValidate:true,validated:validated,onSubmit:function onSubmit(e){return handleSubmit(e);},onReset:function onReset(e){return handleCloseForm(e);},children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formReceiver\",children:[isGoal?/*#__PURE__*/_jsx(Form.Label,{children:\"Goal Title \"}):/*#__PURE__*/_jsx(Form.Label,{children:\"Receiver \"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",placeholder:\"Enter the receiver\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Please enter a receiver.\"}),/*#__PURE__*/_jsx(Form.Text,{})]})}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formAmount\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Amount\"}),/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(InputGroup.Text,{children:\"$\"}),/*#__PURE__*/_jsx(FormControl,{required:true,type:\"number\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"Enter amount\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Please enter a amount.\"})]})]}),isGoal?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formSaved\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Saved\"}),/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(InputGroup.Text,{children:\"$\"}),/*#__PURE__*/_jsx(FormControl,{required:true,type:\"number\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"Enter amount saved\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Please enter a amount saved.\"})]})]})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formCategory\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Category \"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"name\",placeholder:\"Enter the category\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Please enter a category.\"}),/*#__PURE__*/_jsx(Form.Text,{})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formWay\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Transaction Way \"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",type:\"name\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"I\",children:\"In\"}),/*#__PURE__*/_jsx(\"option\",{value:\"O\",children:\"Out\"})]}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Please enter a way.\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formDate\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Date \"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"date\",placeholder:\"Enter the date\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Please choose a date.\"}),/*#__PURE__*/_jsx(Form.Text,{})]})})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(Button,{size:\"md\",variant:\"primary\",type:\"submit\",children:isGoal?\"Add goal\":\"Add transaction\"})})}),/*#__PURE__*/_jsx(\"div\",{style:{hover:{cursor:\"pointer\"}},className:\"d-flex border-0 justify-content-center fw-bold text-secondary\",children:/*#__PURE__*/_jsx(Button,{className:\"border-0\",type:\"reset\",variant:\"outline-secondary\",children:\"Go back\"})})]})]})]}),isGoal?/*#__PURE__*/_jsx(\"div\",{className:\"row mb-5 px-0 col-lg-12 col-md-3 col-sm-5 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(Button,{size:\"lg\",variant:\"outline-info\",onClick:handleShow,children:\"Add Goal\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex fixed-bottom justify-content-center me-4 mb-4\",style:{width:\"15vw\"},children:/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"right\",delay:{show:250,hide:400},overlay:renderTooltip,children:/*#__PURE__*/_jsx(Button,{onClick:handleShow,style:{borderRadius:\"50%\"},size:\"md\",variant:\"primary\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"28\",height:\"40\",fill:\"currentColor\",className:\"bi bi-plus-lg\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z\"})})})})})})]});};export default AddTransacGoal;","map":{"version":3,"sources":["/Users/javier/Documents/BudgetApp/budgetapp/frontend/src/Components/Forms/AddTransacGoal.js"],"names":["React","useState","useContext","Form","Button","Modal","InputGroup","FormControl","OverlayTrigger","Tooltip","AuthContext","useNavigate","AddTransacGoal","goal","isGoal","setIsGoal","show","setShow","authTokens","logoutUser","history","handleClose","handleShow","renderTooltip","props","validated","setValidated","createTransaction","event","fetch","method","headers","Authorization","String","access","body","JSON","stringify","amount","target","elements","formAmount","value","category","formCategory","date","formDate","receiver","formReceiver","transaction_way","formWay","response","json","data","status","window","location","reload","statusText","createTransactionForGoal","console","log","formSaved","createGoal","saved","title","handleSubmit","form","currentTarget","checkValidity","preventDefault","stopPropagation","handleCloseForm","e","hover","cursor","width","hide","borderRadius"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport {\n  Form,\n  Button,\n  Modal,\n  InputGroup,\n  FormControl,\n  OverlayTrigger,\n  Tooltip,\n} from \"react-bootstrap\";\nimport AuthContext from \"../../Context/AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst AddTransacGoal = ({ goal }) => {\n  const [isGoal, setIsGoal] = useState(goal);\n  const [show, setShow] = useState(false);\n  let { authTokens, logoutUser } = useContext(AuthContext);\n  const history = useNavigate();\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const renderTooltip = (props) => (\n    <Tooltip id=\"button-tooltip\" {...props}>\n      Add Transaction\n    </Tooltip>\n  );\n\n  const [validated, setValidated] = useState(false);\n\n  const createTransaction = async (event) => {\n    let response = await fetch(\"/api/transactions/create/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access),\n      },\n      body: JSON.stringify({\n        amount: event.target.elements.formAmount.value,\n        category: event.target.elements.formCategory.value,\n        date: event.target.elements.formDate.value,\n        receiver: event.target.elements.formReceiver.value,\n        transaction_way: event.target.elements.formWay.value,\n      }),\n    });\n    let data = await response.json();\n    if (response.status === 200) {\n      //history(\"/\");\n      window.location.reload();\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  const createTransactionForGoal = async (event) => {\n    console.log(event);\n    let response = await fetch(\"/api/transactions/create/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access),\n      },\n      body: JSON.stringify({\n        amount: event.target.elements.formSaved.value,\n        category: \"goal\",\n        receiver: event.target.elements.formReceiver.value,\n        transaction_way: \"O\",\n        date: event.target.elements.formDate.value,\n      }),\n    });\n    let data = await response.json();\n    if (response.status === 200) {\n      //history(\"/\");\n      //For now i use this because of time but its not a good solution to\n      //update the react view when create new object\n      window.location.reload();\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  const createGoal = async (event) => {\n    let response = await fetch(\"/api/goals/create/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access),\n      },\n      body: JSON.stringify({\n        amount: event.target.elements.formAmount.value,\n        saved: event.target.elements.formSaved.value,\n        title: event.target.elements.formReceiver.value,\n      }),\n    });\n    let data = await response.json();\n    if (response.status === 200) {\n      //history(\"/\");\n      console.log(\"hola\");\n      await createTransactionForGoal(event);\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  const handleSubmit = async (event) => {\n    const form = event.currentTarget;\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      if (isGoal) {\n        createGoal(event);\n      } else {\n        createTransaction(event);\n      }\n    }\n    setValidated(true);\n    handleClose();\n  };\n\n  const handleCloseForm = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    setValidated(false);\n    handleClose();\n  };\n\n  return (\n    <div className=\"px-0 d-flex justify-content-center mx-0\">\n      <Modal show={show} onHide={handleClose}>\n        {isGoal ? (\n          <Modal.Header closeButton onClick={() => setValidated(false)}>\n            <Modal.Title>Add new goal</Modal.Title>\n          </Modal.Header>\n        ) : (\n          <Modal.Header closeButton onClick={() => setValidated(false)}>\n            <Modal.Title>Add new transaction</Modal.Title>\n          </Modal.Header>\n        )}\n        <Form\n          noValidate\n          validated={validated}\n          onSubmit={(e) => handleSubmit(e)}\n          onReset={(e) => handleCloseForm(e)}\n        >\n          <Modal.Body>\n            <div>\n              <Form.Group className=\"mb-3\" controlId=\"formReceiver\">\n                {isGoal ? (\n                  <Form.Label>Goal Title </Form.Label>\n                ) : (\n                  <Form.Label>Receiver </Form.Label>\n                )}\n                <Form.Control\n                  required\n                  type=\"text\"\n                  placeholder=\"Enter the receiver\"\n                />\n                <Form.Control.Feedback type=\"invalid\">\n                  Please enter a receiver.\n                </Form.Control.Feedback>\n                <Form.Text></Form.Text>\n              </Form.Group>\n            </div>\n            <Form.Group className=\"mb-3\" controlId=\"formAmount\">\n              <Form.Label>Amount</Form.Label>\n              <InputGroup className=\"mb-3\">\n                <InputGroup.Text>$</InputGroup.Text>\n                <FormControl\n                  required\n                  type=\"number\"\n                  min=\"0.00\"\n                  max=\"10000.00\"\n                  step=\"0.01\"\n                  placeholder=\"Enter amount\"\n                />\n                <Form.Control.Feedback type=\"invalid\">\n                  Please enter a amount.\n                </Form.Control.Feedback>\n              </InputGroup>\n            </Form.Group>\n            {isGoal ? (\n              <div>\n                <Form.Group className=\"mb-3\" controlId=\"formSaved\">\n                  <Form.Label>Saved</Form.Label>\n                  <InputGroup className=\"mb-3\">\n                    <InputGroup.Text>$</InputGroup.Text>\n                    <FormControl\n                      required\n                      type=\"number\"\n                      min=\"0.00\"\n                      max=\"10000.00\"\n                      step=\"0.01\"\n                      placeholder=\"Enter amount saved\"\n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                      Please enter a amount saved.\n                    </Form.Control.Feedback>\n                  </InputGroup>\n                </Form.Group>\n              </div>\n            ) : (\n              <div>\n                <div>\n                  <Form.Group className=\"mb-3\" controlId=\"formCategory\">\n                    <Form.Label>Category </Form.Label>\n                    <Form.Control\n                      required\n                      type=\"name\"\n                      placeholder=\"Enter the category\"\n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                      Please enter a category.\n                    </Form.Control.Feedback>\n                    <Form.Text></Form.Text>\n                  </Form.Group>\n                </div>\n\n                <div>\n                  <Form.Group className=\"mb-3\" controlId=\"formWay\">\n                    <Form.Label>Transaction Way </Form.Label>\n                    <Form.Control as=\"select\" type=\"name\" required>\n                      <option value=\"I\">In</option>\n                      <option value=\"O\">Out</option>\n                    </Form.Control>\n                    <Form.Control.Feedback type=\"invalid\">\n                      Please enter a way.\n                    </Form.Control.Feedback>\n                  </Form.Group>\n                </div>\n              </div>\n            )}\n            <div>\n              <Form.Group className=\"mb-3\" controlId=\"formDate\">\n                <Form.Label>Date </Form.Label>\n                <Form.Control\n                  required\n                  type=\"date\"\n                  placeholder=\"Enter the date\"\n                />\n                <Form.Control.Feedback type=\"invalid\">\n                  Please choose a date.\n                </Form.Control.Feedback>\n                <Form.Text></Form.Text>\n              </Form.Group>\n            </div>\n          </Modal.Body>\n          <Modal.Footer>\n            <div>\n              <div className=\"d-flex justify-content-center\">\n                <Button size=\"md\" variant=\"primary\" type=\"submit\">\n                  {isGoal ? \"Add goal\" : \"Add transaction\"}\n                </Button>\n              </div>\n            </div>\n            <div\n              style={{\n                hover: {\n                  cursor: \"pointer\",\n                },\n              }}\n              className=\"d-flex border-0 justify-content-center fw-bold text-secondary\"\n            >\n              <Button\n                className=\"border-0\"\n                type=\"reset\"\n                variant=\"outline-secondary\"\n              >\n                Go back\n              </Button>\n            </div>\n          </Modal.Footer>\n        </Form>\n      </Modal>\n      {isGoal ? (\n        <div className=\"row mb-5 px-0 col-lg-12 col-md-3 col-sm-5 d-flex justify-content-center\">\n          <Button size=\"lg\" variant=\"outline-info\" onClick={handleShow}>\n            Add Goal\n          </Button>\n        </div>\n      ) : (\n        <div className=\"d-flex\">\n          <div\n            className=\"d-flex fixed-bottom justify-content-center me-4 mb-4\"\n            style={{ width: \"15vw\" }}\n          >\n            <OverlayTrigger\n              placement=\"right\"\n              delay={{ show: 250, hide: 400 }}\n              overlay={renderTooltip}\n            >\n              <Button\n                onClick={handleShow}\n                style={{ borderRadius: \"50%\" }}\n                size=\"md\"\n                variant=\"primary\"\n              >\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"28\"\n                  height=\"40\"\n                  fill=\"currentColor\"\n                  className=\"bi bi-plus-lg\"\n                  viewBox=\"0 0 16 16\"\n                >\n                  <path\n                    fillRule=\"evenodd\"\n                    d=\"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z\"\n                  />\n                </svg>\n              </Button>\n            </OverlayTrigger>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AddTransacGoal;\n"]},"metadata":{},"sourceType":"module"}