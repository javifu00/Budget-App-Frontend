{"ast":null,"code":"import _asyncToGenerator from\"/Users/javier/Documents/BudgetFrontend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/javier/Documents/BudgetFrontend/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext}from\"react\";import{Card,ProgressBar}from\"react-bootstrap\";import AuthContext from\"../../Context/AuthContext\";//import AddTransacGoal from \"../Forms/AddTransacGoal\";\nimport AddEditGoalModal from\"../Modals/AddEditGoalModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MoneyCard=function MoneyCard(_ref){var amount=_ref.amount,title=_ref.title,saved=_ref.saved,id=_ref.id;var completed=saved*100/amount;var _useContext=useContext(AuthContext),authTokens=_useContext.authTokens,logoutUser=_useContext.logoutUser;var deleteGoal=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://budget-app-javi.herokuapp.com/goals/\".concat(id,\"/delete/\"),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)}});case 2:response=_context.sent;if(!(response.status===200)){_context.next=8;break;}_context.next=6;return createTransactionForGoal();case 6:_context.next=9;break;case 8:if(response.statusText===\"Unauthorized\"){logoutUser();}case 9:window.location.reload();case 10:case\"end\":return _context.stop();}}},_callee);}));return function deleteGoal(){return _ref2.apply(this,arguments);};}();var createTransactionForGoal=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var newDate,offset,date,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newDate=new Date();offset=newDate.getTimezoneOffset();date=new Date(newDate.getTime()-offset*120*1000);date=date.toISOString().split(\"T\")[0];_context2.next=6;return fetch(\"https://budget-app-javi.herokuapp.com/transactions/create/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)},body:JSON.stringify({amount:saved,category:\"goal\",receiver:title,transaction_way:\"I\",date:date})});case 6:response=_context2.sent;if(response.status===200){//history(\"/\");\n//For now i use this because of time but its not a good solution to\n//update the react view when create new object\n}else if(response.statusText===\"Unauthorized\"){logoutUser();}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function createTransactionForGoal(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Card,{className:\"rounded-5 my-2\",children:/*#__PURE__*/_jsx(Card.Body,{className:\"mx-1\",children:saved?/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 mx-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex mb-2 w-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-10 col-sm-10 col-lg-10 col-10\",children:/*#__PURE__*/_jsx(Card.Title,{className:\"text-capitalize\",children:title})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2 col-sm-2 col-lg-2 col-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\",children:/*#__PURE__*/_jsx(\"svg\",{style:{cursor:\"pointer\"},xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",className:\"bi bi-trash2 mr-2 my-0\",onClick:function onClick(){return deleteGoal();},children:/*#__PURE__*/_jsx(\"path\",{d:\"M14 3a.702.702 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.703.703 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2zM3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5c-1.954 0-3.69-.311-4.785-.793z\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\",children:/*#__PURE__*/_jsx(AddEditGoalModal,{id:id,title:title,amount:amount,saved:saved})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-success\",children:[\"$\",saved]}),/*#__PURE__*/_jsxs(\"span\",{children:[\" / $ \",amount]})]}),/*#__PURE__*/_jsx(ProgressBar,{variant:\"success\",now:completed})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card.Text,{className:\"text-capitalize\",children:title}),/*#__PURE__*/_jsx(\"div\",{children:amount>0?/*#__PURE__*/_jsxs(\"h4\",{children:[\"$\",amount]}):/*#__PURE__*/_jsxs(\"h4\",{className:\"text-danger\",children:[\"$\",amount]})})]})})})});};export default MoneyCard;","map":{"version":3,"sources":["/Users/javier/Documents/BudgetFrontend/frontend/src/Components/Cards/MoneyCard.js"],"names":["React","useContext","Card","ProgressBar","AuthContext","AddEditGoalModal","MoneyCard","amount","title","saved","id","completed","authTokens","logoutUser","deleteGoal","fetch","method","headers","Authorization","String","access","response","status","createTransactionForGoal","statusText","window","location","reload","newDate","Date","offset","getTimezoneOffset","date","getTime","toISOString","split","body","JSON","stringify","category","receiver","transaction_way","cursor"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\nimport { Card, ProgressBar } from \"react-bootstrap\";\nimport AuthContext from \"../../Context/AuthContext\";\n//import AddTransacGoal from \"../Forms/AddTransacGoal\";\nimport AddEditGoalModal from \"../Modals/AddEditGoalModal\";\n\nconst MoneyCard = ({ amount, title, saved, id }) => {\n  const completed = (saved * 100) / amount;\n  let { authTokens, logoutUser } = useContext(AuthContext);\n\n  let deleteGoal = async () => {\n    let response = await fetch(\n      `https://budget-app-javi.herokuapp.com/goals/${id}/delete/`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + String(authTokens.access),\n        },\n      }\n    );\n    if (response.status === 200) {\n      //history(\"/\");\n      await createTransactionForGoal();\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n    window.location.reload();\n  };\n\n  const createTransactionForGoal = async () => {\n    let newDate = new Date();\n    const offset = newDate.getTimezoneOffset();\n    let date = new Date(newDate.getTime() - offset * 120 * 1000);\n    date = date.toISOString().split(\"T\")[0];\n    let response = await fetch(\n      \"https://budget-app-javi.herokuapp.com/transactions/create/\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + String(authTokens.access),\n        },\n        body: JSON.stringify({\n          amount: saved,\n          category: \"goal\",\n          receiver: title,\n          transaction_way: \"I\",\n          date: date,\n        }),\n      }\n    );\n    if (response.status === 200) {\n      //history(\"/\");\n      //For now i use this because of time but its not a good solution to\n      //update the react view when create new object\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  return (\n    <div>\n      <Card className=\"rounded-5 my-2\">\n        <Card.Body className=\"mx-1\">\n          {saved ? (\n            <div className=\"w-100 mx-0\">\n              <div className=\"d-flex mb-2 w-100\">\n                <div className=\"col-md-10 col-sm-10 col-lg-10 col-10\">\n                  <Card.Title className=\"text-capitalize\">{title}</Card.Title>\n                </div>\n                <div className=\"col-md-2 col-sm-2 col-lg-2 col-2\">\n                  <div className=\"row\">\n                    <div className=\"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\">\n                      <svg\n                        style={{ cursor: \"pointer\" }}\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"16\"\n                        height=\"16\"\n                        fill=\"currentColor\"\n                        className=\"bi bi-trash2 mr-2 my-0\"\n                        onClick={() => deleteGoal()}\n                      >\n                        <path d=\"M14 3a.702.702 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.703.703 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2zM3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5c-1.954 0-3.69-.311-4.785-.793z\" />\n                      </svg>\n                    </div>\n                    <div className=\"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\">\n                      <AddEditGoalModal\n                        id={id}\n                        title={title}\n                        amount={amount}\n                        saved={saved}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div>\n                <h4>\n                  <span className=\"text-success\">${saved}</span>\n                  <span> / $ {amount}</span>\n                </h4>\n                <ProgressBar variant=\"success\" now={completed} />\n              </div>\n            </div>\n          ) : (\n            <div>\n              <Card.Text className=\"text-capitalize\">{title}</Card.Text>\n              <div>\n                {amount > 0 ? (\n                  <h4>${amount}</h4>\n                ) : (\n                  <h4 className=\"text-danger\">${amount}</h4>\n                )}\n              </div>\n            </div>\n          )}\n        </Card.Body>\n      </Card>\n    </div>\n  );\n};\n\nexport default MoneyCard;\n"]},"metadata":{},"sourceType":"module"}