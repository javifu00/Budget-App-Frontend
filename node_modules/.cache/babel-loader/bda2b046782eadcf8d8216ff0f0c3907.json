{"ast":null,"code":"import _regeneratorRuntime from\"/Users/javier/Documents/BudgetFrontend/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/javier/Documents/BudgetFrontend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useContext}from\"react\";import{Card,ProgressBar}from\"react-bootstrap\";import AuthContext from\"../../Context/AuthContext\";//import AddTransacGoal from \"../Forms/AddTransacGoal\";\nimport AddEditGoalModal from\"../Modals/AddEditGoalModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MoneyCard=function MoneyCard(_ref){var amount=_ref.amount,title=_ref.title,saved=_ref.saved,id=_ref.id,red=_ref.red;var completed=saved*100/amount;var _useContext=useContext(AuthContext),authTokens=_useContext.authTokens,logoutUser=_useContext.logoutUser;var deleteGoal=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"goals/\".concat(id,\"/delete/\"),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)}});case 2:response=_context.sent;if(!(response.status===200)){_context.next=9;break;}_context.next=6;return createTransactionForGoal();case 6:window.location.reload();_context.next=10;break;case 9:if(response.statusText===\"Unauthorized\"){logoutUser();}case 10:case\"end\":return _context.stop();}}},_callee);}));return function deleteGoal(){return _ref2.apply(this,arguments);};}();var createTransactionForGoal=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var newDate,offset,date,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(saved==0)){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:newDate=new Date();offset=newDate.getTimezoneOffset();date=new Date(newDate.getTime()-offset*120*1000);date=date.toISOString().split(\"T\")[0];_context2.next=8;return fetch(\"transactions/create/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)},body:JSON.stringify({amount:saved,category:\"goal\",receiver:title,transaction_way:\"I\",date:date})});case 8:response=_context2.sent;if(response.status===200){//history(\"/\");\n//For now i use this because of time but its not a good solution to\n//update the react view when create new object\n}else if(response.statusText===\"Unauthorized\"){logoutUser();}case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function createTransactionForGoal(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Card,{className:\"rounded-5 my-2\",children:/*#__PURE__*/_jsx(Card.Body,{className:\"mx-1\",children:saved?/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 mx-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex mb-2 w-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-10 col-sm-10 col-lg-10 col-10\",children:/*#__PURE__*/_jsx(Card.Title,{className:\"text-capitalize\",children:title})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2 col-sm-2 col-lg-2 col-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\",children:/*#__PURE__*/_jsx(\"svg\",{style:{cursor:\"pointer\"},xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",className:\"bi bi-trash2 mr-2 my-0\",onClick:function onClick(){return deleteGoal();},children:/*#__PURE__*/_jsx(\"path\",{d:\"M14 3a.702.702 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.703.703 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2zM3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5c-1.954 0-3.69-.311-4.785-.793z\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\",children:/*#__PURE__*/_jsx(AddEditGoalModal,{id:id,title:title,amount:amount,saved:saved})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-success\",children:[\"$\",saved]}),/*#__PURE__*/_jsxs(\"span\",{children:[\" / $ \",amount]})]}),/*#__PURE__*/_jsx(ProgressBar,{variant:\"success\",now:completed})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card.Text,{className:\"text-capitalize\",children:title}),/*#__PURE__*/_jsx(\"div\",{children:!red?/*#__PURE__*/_jsxs(\"h4\",{className:\"text-success\",children:[\"$\",amount]}):/*#__PURE__*/_jsxs(\"h4\",{className:\"text-danger\",children:[\"$\",amount]})})]})})})});};export default MoneyCard;","map":{"version":3,"names":["React","useContext","Card","ProgressBar","AuthContext","AddEditGoalModal","MoneyCard","amount","title","saved","id","red","completed","authTokens","logoutUser","deleteGoal","fetch","method","headers","Authorization","String","access","response","status","createTransactionForGoal","window","location","reload","statusText","newDate","Date","offset","getTimezoneOffset","date","getTime","toISOString","split","body","JSON","stringify","category","receiver","transaction_way","cursor"],"sources":["/Users/javier/Documents/BudgetFrontend/frontend/src/Components/Cards/MoneyCard.js"],"sourcesContent":["import React, { useContext } from \"react\";\nimport { Card, ProgressBar } from \"react-bootstrap\";\nimport AuthContext from \"../../Context/AuthContext\";\n//import AddTransacGoal from \"../Forms/AddTransacGoal\";\nimport AddEditGoalModal from \"../Modals/AddEditGoalModal\";\n\nconst MoneyCard = ({ amount, title, saved, id, red }) => {\n  const completed = (saved * 100) / amount;\n  let { authTokens, logoutUser } = useContext(AuthContext);\n\n  let deleteGoal = async () => {\n    let response = await fetch(`goals/${id}/delete/`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access),\n      },\n    });\n    if (response.status === 200) {\n      //history(\"/\");\n      await createTransactionForGoal();\n      window.location.reload();\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  const createTransactionForGoal = async () => {\n    if (saved == 0) {\n      return;\n    }\n    let newDate = new Date();\n    const offset = newDate.getTimezoneOffset();\n    let date = new Date(newDate.getTime() - offset * 120 * 1000);\n    date = date.toISOString().split(\"T\")[0];\n    let response = await fetch(\"transactions/create/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access),\n      },\n      body: JSON.stringify({\n        amount: saved,\n        category: \"goal\",\n        receiver: title,\n        transaction_way: \"I\",\n        date: date,\n      }),\n    });\n    if (response.status === 200) {\n      //history(\"/\");\n      //For now i use this because of time but its not a good solution to\n      //update the react view when create new object\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  return (\n    <div>\n      <Card className=\"rounded-5 my-2\">\n        <Card.Body className=\"mx-1\">\n          {saved ? (\n            <div className=\"w-100 mx-0\">\n              <div className=\"d-flex mb-2 w-100\">\n                <div className=\"col-md-10 col-sm-10 col-lg-10 col-10\">\n                  <Card.Title className=\"text-capitalize\">{title}</Card.Title>\n                </div>\n                <div className=\"col-md-2 col-sm-2 col-lg-2 col-2\">\n                  <div className=\"row\">\n                    <div className=\"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\">\n                      <svg\n                        style={{ cursor: \"pointer\" }}\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"16\"\n                        height=\"16\"\n                        fill=\"currentColor\"\n                        className=\"bi bi-trash2 mr-2 my-0\"\n                        onClick={() => deleteGoal()}\n                      >\n                        <path d=\"M14 3a.702.702 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.703.703 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2zM3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5c-1.954 0-3.69-.311-4.785-.793z\" />\n                      </svg>\n                    </div>\n                    <div className=\"px-0 col-md-6 col-sm-6 col-lg-6 col-6 d-flex justify-content-center mx-0 mb-2\">\n                      <AddEditGoalModal\n                        id={id}\n                        title={title}\n                        amount={amount}\n                        saved={saved}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div>\n                <h4>\n                  <span className=\"text-success\">${saved}</span>\n                  <span> / $ {amount}</span>\n                </h4>\n                <ProgressBar variant=\"success\" now={completed} />\n              </div>\n            </div>\n          ) : (\n            <div>\n              <Card.Text className=\"text-capitalize\">{title}</Card.Text>\n              <div>\n                {!red ? (\n                  <h4 className=\"text-success\">${amount}</h4>\n                ) : (\n                  <h4 className=\"text-danger\">${amount}</h4>\n                )}\n              </div>\n            </div>\n          )}\n        </Card.Body>\n      </Card>\n    </div>\n  );\n};\n\nexport default MoneyCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}