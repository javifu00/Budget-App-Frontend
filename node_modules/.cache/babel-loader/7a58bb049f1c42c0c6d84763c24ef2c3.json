{"ast":null,"code":"import _asyncToGenerator from\"/Users/javier/Documents/BudgetApp/budgetapp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/javier/Documents/BudgetApp/budgetapp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/javier/Documents/BudgetApp/budgetapp/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState,useContext}from\"react\";import{Link}from\"react-router-dom\";import{ListGroup,Pagination,Table}from\"react-bootstrap\";import{compareAsc,format}from\"date-fns\";import AuthContext from\"../Context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Transaction=function Transaction(_ref){var loadPagination=_ref.loadPagination;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),transactions=_useState2[0],setTransactions=_useState2[1];var _useContext=useContext(AuthContext),authTokens=_useContext.authTokens,logoutUser=_useContext.logoutUser;useEffect(function(){getTransactions();},[]);var getTransactions=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"api/transactions/\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+String(authTokens.access)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;if(response.status===200){setTransactions(data[\"serializer\"]);}else if(response.statusText===\"Unauthorized\"){logoutUser();}case 7:case\"end\":return _context.stop();}}},_callee);}));return function getTransactions(){return _ref2.apply(this,arguments);};}();var _useState3=useState(transactions.slice(0,10)),_useState4=_slicedToArray(_useState3,2),listToDisplay=_useState4[0],setListToDisplay=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var itemsPerPage=10;var pagesCount=Math.ceil(transactions.length/itemsPerPage);{/*for (let number = 1; number <= pagesCount; number++) {\n    item.push(\n      <Pagination.Item\n        onClick={() => onPageNumberClick(pageNumber)}\n        key={number}\n        active={number === active}\n      >\n        {number}\n      </Pagination.Item>\n    );\n  }*/}var changePage=function changePage(number){if(currentPage===number)return;setCurrentPage(number);var index=number*10;setListToDisplay(transactions.slice(index-10,index-1));};{/*const onPageNumberClick = (pageNumber) => {\n    changePage(pageNumber);\n    console.log(pageNumber);\n  };\n  const setLastPageAsCurrent = () => {\n    if (currentPage > pagesCount) {\n      setCurrentPage(pagesCount);\n    }\n  };*/}var onPreviousPageClick=function onPreviousPageClick(){if(currentPage-1>0){changePage(currentPage-1);}};var onNextPageClick=function onNextPageClick(){if(currentPage+1<=pagesCount){changePage(currentPage+1);}};{/*const pageNumbers = [...new Array(pagesCount)].map((_, index) => {\n    const pageNumber = index + 1;\n    const isPageNumberFirst = pageNumber === 1;\n    const isPageNumberLast = pageNumber === pagesCount;\n    const isCurrentPageWithinTwoPageNumbers =\n      Math.abs(pageNumber - currentPage) <= 2;\n\n    if (\n      isPageNumberFirst ||\n      isPageNumberLast ||\n      isCurrentPageWithinTwoPageNumbers\n    ) {\n      isPageNumberOutOfRange = false;\n      return (\n        <Pagination.Item\n          className=\"d-none\"\n          key={pageNumber}\n          onClick={() => onPageNumberClick(pageNumber)}\n          active={pageNumber === currentPage}\n        >\n          {pageNumber}\n        </Pagination.Item>\n      );\n    }\n\n    if (!isPageNumberOutOfRange) {\n      isPageNumberOutOfRange = true;\n      return <Pagination.Ellipsis key={pageNumber} className=\"muted\" />;\n    }\n\n    return null;\n  });*/}return/*#__PURE__*/_jsxs(\"div\",{className:\"justify-content-center w-100\",children:[/*#__PURE__*/_jsxs(Table,{size:\"lg\",responsive:true,className:\"table-hover border-spacing-4\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"my-4\",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"my-4\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text_center\",scope:\"col\",children:\"Receiver\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.map(function(transac,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"my-4\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"col-md-4 text-capitalize\",children:transac.receiver}),/*#__PURE__*/_jsx(\"td\",{className:\"col-md-3 text-capitalize\",children:transac.category}),transac.transaction_way==\"O\"?/*#__PURE__*/_jsxs(\"td\",{className:\"col-md-2 text-danger\",children:[\"$\",transac.amount]}):/*#__PURE__*/_jsxs(\"td\",{className:\"col-md-2 text-success\",children:[\"$\",transac.amount]}),/*#__PURE__*/_jsx(\"td\",{className:\"col-md-4\",children:transac.date})]},index);})})]}),loadPagination?/*#__PURE__*/_jsxs(Pagination,{children:[/*#__PURE__*/_jsx(Pagination.Prev,{onClick:onPreviousPageClick}),/*#__PURE__*/_jsx(Pagination.Next,{onClick:onNextPageClick}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center mx-2\",children:[currentPage,\"/\",pagesCount]})]}):/*#__PURE__*/_jsx(\"div\",{})]});};export default Transaction;","map":{"version":3,"sources":["/Users/javier/Documents/BudgetApp/budgetapp/frontend/src/Components/Transaction.js"],"names":["React","useEffect","useState","useContext","Link","ListGroup","Pagination","Table","compareAsc","format","AuthContext","Transaction","loadPagination","transactions","setTransactions","authTokens","logoutUser","getTransactions","fetch","method","headers","Authorization","String","access","response","json","data","status","statusText","slice","listToDisplay","setListToDisplay","currentPage","setCurrentPage","itemsPerPage","pagesCount","Math","ceil","length","changePage","number","index","onPreviousPageClick","onNextPageClick","map","transac","receiver","category","transaction_way","amount","date"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { ListGroup, Pagination, Table } from \"react-bootstrap\";\nimport { compareAsc, format } from \"date-fns\";\nimport AuthContext from \"../Context/AuthContext\";\n\nconst Transaction = ({ loadPagination }) => {\n  let [transactions, setTransactions] = useState([]);\n  let { authTokens, logoutUser } = useContext(AuthContext);\n\n  useEffect(() => {\n    getTransactions();\n  }, []);\n\n  let getTransactions = async () => {\n    let response = await fetch(\"api/transactions/\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + String(authTokens.access),\n      },\n    });\n    let data = await response.json();\n\n    if (response.status === 200) {\n      setTransactions(data[\"serializer\"]);\n    } else if (response.statusText === \"Unauthorized\") {\n      logoutUser();\n    }\n  };\n\n  const [listToDisplay, setListToDisplay] = useState(transactions.slice(0, 10));\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 10;\n  const pagesCount = Math.ceil(transactions.length / itemsPerPage);\n  {\n    /*for (let number = 1; number <= pagesCount; number++) {\n    item.push(\n      <Pagination.Item\n        onClick={() => onPageNumberClick(pageNumber)}\n        key={number}\n        active={number === active}\n      >\n        {number}\n      </Pagination.Item>\n    );\n  }*/\n  }\n  const changePage = (number) => {\n    if (currentPage === number) return;\n    setCurrentPage(number);\n    let index = number * 10;\n    setListToDisplay(transactions.slice(index - 10, index - 1));\n  };\n  {\n    /*const onPageNumberClick = (pageNumber) => {\n    changePage(pageNumber);\n    console.log(pageNumber);\n  };\n  const setLastPageAsCurrent = () => {\n    if (currentPage > pagesCount) {\n      setCurrentPage(pagesCount);\n    }\n  };*/\n  }\n\n  const onPreviousPageClick = () => {\n    if (currentPage - 1 > 0) {\n      changePage(currentPage - 1);\n    }\n  };\n\n  const onNextPageClick = () => {\n    if (currentPage + 1 <= pagesCount) {\n      changePage(currentPage + 1);\n    }\n  };\n\n  {\n    /*const pageNumbers = [...new Array(pagesCount)].map((_, index) => {\n    const pageNumber = index + 1;\n    const isPageNumberFirst = pageNumber === 1;\n    const isPageNumberLast = pageNumber === pagesCount;\n    const isCurrentPageWithinTwoPageNumbers =\n      Math.abs(pageNumber - currentPage) <= 2;\n\n    if (\n      isPageNumberFirst ||\n      isPageNumberLast ||\n      isCurrentPageWithinTwoPageNumbers\n    ) {\n      isPageNumberOutOfRange = false;\n      return (\n        <Pagination.Item\n          className=\"d-none\"\n          key={pageNumber}\n          onClick={() => onPageNumberClick(pageNumber)}\n          active={pageNumber === currentPage}\n        >\n          {pageNumber}\n        </Pagination.Item>\n      );\n    }\n\n    if (!isPageNumberOutOfRange) {\n      isPageNumberOutOfRange = true;\n      return <Pagination.Ellipsis key={pageNumber} className=\"muted\" />;\n    }\n\n    return null;\n  });*/\n  }\n\n  return (\n    <div className=\"justify-content-center w-100\">\n      {/* <ListGroup defaultActiveKey=\"#link1\">\n        <ListGroup.Item\n          className=\"my-2 border-top-0 border-end-0 border-start-0\"\n          variant=\"light\"\n        >\n          <div className=\"d-flex justify-content-between flex-row\">\n            <div>Starbucks</div>\n            <div>Food</div>\n            <div>10/04/2022</div>\n            <div>$12.99</div>\n          </div>\n        </ListGroup.Item>\n        <ListGroup.Item\n          className=\"my-2 border-top-0 border-end-0 border-start-0\"\n          variant=\"light\"\n        >\n          <div className=\"d-flex justify-content-between flex-row\">\n            <div>Universidad</div>\n            <div>Studies</div>\n            <div>01/04/2022</div>\n            <div>$350.00</div>\n          </div>\n        </ListGroup.Item>\n        <ListGroup.Item\n          className=\"my-2 border-top-0 border-end-0 border-start-0\"\n          variant=\"light\"\n        >\n          <div className=\"d-flex justify-content-between flex-row\">\n            <div>Gama</div>\n            <div>Food</div>\n            <div>29/03/2022</div>\n            <div>$0.90</div>\n          </div>\n        </ListGroup.Item>\n      </ListGroup>*/}\n\n      <Table size=\"lg\" responsive className=\"table-hover border-spacing-4\">\n        <thead className=\"my-4\">\n          <tr className=\"my-4\">\n            <th className=\"text_center\" scope=\"col\">\n              Receiver\n            </th>\n            <th scope=\"col\">Category</th>\n            <th scope=\"col\">Amount</th>\n            <th scope=\"col\">Date</th>\n          </tr>\n        </thead>\n        <tbody>\n          {transactions.map((transac, index) => (\n            <tr key={index} className=\"my-4\">\n              <td className=\"col-md-4 text-capitalize\">{transac.receiver}</td>\n              <td className=\"col-md-3 text-capitalize\">{transac.category}</td>\n              {transac.transaction_way == \"O\" ? (\n                <td className=\"col-md-2 text-danger\">${transac.amount}</td>\n              ) : (\n                <td className=\"col-md-2 text-success\">${transac.amount}</td>\n              )}\n              <td className=\"col-md-4\">{transac.date}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n      {loadPagination ? (\n        <Pagination>\n          <Pagination.Prev onClick={onPreviousPageClick} />\n          <Pagination.Next onClick={onNextPageClick} />\n          <div className=\"d-flex align-items-center mx-2\">\n            {currentPage}/{pagesCount}\n          </div>\n        </Pagination>\n      ) : (\n        <div></div>\n      )}\n    </div>\n  );\n};\n\nexport default Transaction;\n"]},"metadata":{},"sourceType":"module"}